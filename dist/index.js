"use strict";function ___$insertStyle(n){if(n&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=n,document.head.appendChild(t),n}}var React=require("react"),extendStatics=function(n,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])})(n,t)};function __extends(n,t){function e(){this.constructor=n}extendStatics(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var __assign=function(){return(__assign=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++)for(var a in t=arguments[e])Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n}).apply(this,arguments)};function __awaiter(n,t,e,o){return new(e||(e=Promise))(function(a,s){function i(n){try{l(o.next(n))}catch(n){s(n)}}function r(n){try{l(o.throw(n))}catch(n){s(n)}}function l(n){n.done?a(n.value):new e(function(t){t(n.value)}).then(i,r)}l((o=o.apply(n,t||[])).next())})}function __generator(n,t){var e,o,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,o&&(a=2&s[0]?o.return:s[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,s[1])).done)return a;switch(o=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(n,i)}catch(n){s=[6,n],o=0}finally{e=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}}___$insertStyle(".johnnymnemonic.input {\n  position: relative;\n  width: 100%;\n}\n.johnnymnemonic.la-ball-scale {\n  position: absolute;\n  margin: auto;\n  top: 0;\n  bottom: 0;\n  right: 1.5rem;\n}\n.johnnymnemonic.suggestion-list {\n  list-style: none;\n  display: block;\n  position: absolute;\n  margin: 0;\n  padding: 0;\n  width: 91%;\n  font-size: 90%;\n  border: 1px solid #eee;\n  background: #fff;\n  z-index: 10;\n}\n.johnnymnemonic.suggestion-list li {\n  padding: 0.25rem 0.5rem;\n}\n.johnnymnemonic.suggestion-list li:not(:last-child) {\n  border-bottom: 1px solid #eee;\n}\n\n/*!\n * Load Awesome v1.1.0 (http://github.danielcardoso.net/load-awesome/)\n * Copyright 2015 Daniel Cardoso <@DanielCardoso>\n * Licensed under MIT\n */\n.la-ball-scale,\n.la-ball-scale > div {\n  position: relative;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\n\n.la-ball-scale {\n  display: block;\n  font-size: 0;\n  color: #ccc;\n}\n\n.la-ball-scale.la-dark {\n  color: #333;\n}\n\n.la-ball-scale > div {\n  display: inline-block;\n  float: none;\n  background-color: currentColor;\n  border: 0 solid currentColor;\n}\n\n.la-ball-scale {\n  width: 32px;\n  height: 32px;\n}\n\n.la-ball-scale > div {\n  width: 32px;\n  height: 32px;\n  border-radius: 100%;\n  opacity: 0;\n  -webkit-animation: ball-scale 1s 0s ease-in-out infinite;\n  -moz-animation: ball-scale 1s 0s ease-in-out infinite;\n  -o-animation: ball-scale 1s 0s ease-in-out infinite;\n  animation: ball-scale 1s 0s ease-in-out infinite;\n}\n\n.la-ball-scale.la-sm {\n  width: 16px;\n  height: 16px;\n}\n\n.la-ball-scale.la-sm > div {\n  width: 16px;\n  height: 16px;\n}\n\n.la-ball-scale.la-2x {\n  width: 64px;\n  height: 64px;\n}\n\n.la-ball-scale.la-2x > div {\n  width: 64px;\n  height: 64px;\n}\n\n.la-ball-scale.la-3x {\n  width: 96px;\n  height: 96px;\n}\n\n.la-ball-scale.la-3x > div {\n  width: 96px;\n  height: 96px;\n}\n\n/*\n * Animation\n */\n@-webkit-keyframes ball-scale {\n  0% {\n    opacity: 1;\n    -webkit-transform: scale(0);\n    transform: scale(0);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform: scale(1);\n    transform: scale(1);\n  }\n}\n@-moz-keyframes ball-scale {\n  0% {\n    opacity: 1;\n    -moz-transform: scale(0);\n    transform: scale(0);\n  }\n  100% {\n    opacity: 0;\n    -moz-transform: scale(1);\n    transform: scale(1);\n  }\n}\n@-o-keyframes ball-scale {\n  0% {\n    opacity: 1;\n    -o-transform: scale(0);\n    transform: scale(0);\n  }\n  100% {\n    opacity: 0;\n    -o-transform: scale(1);\n    transform: scale(1);\n  }\n}\n@keyframes ball-scale {\n  0% {\n    opacity: 1;\n    -webkit-transform: scale(0);\n    -moz-transform: scale(0);\n    -o-transform: scale(0);\n    transform: scale(0);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform: scale(1);\n    -moz-transform: scale(1);\n    -o-transform: scale(1);\n    transform: scale(1);\n  }\n}");var JohnnyMnemonic=function(n){function t(t){var e=n.call(this,t)||this;return e.state={value:"",suggestions:[],suggestionFuncDelay:t.suggestionFuncDelay||250,suggestionFuncTimeout:null,loading:!1,focused:!1,lastOnChangeEvent:null},e.inputRef=React.createRef(),e.ulRef=React.createRef(),e.onChange=e.onChange.bind(e),e.onInputFocus=e.onInputFocus.bind(e),e.onInputBlur=e.onInputBlur.bind(e),e.onSuggestionClick=e.onSuggestionClick.bind(e),e.manageFocus=e.manageFocus.bind(e),e.manageKeyDown=e.manageKeyDown.bind(e),e.fetchSuggestions=e.fetchSuggestions.bind(e),e.manageTimeout=e.manageTimeout.bind(e),e}return __extends(t,n),t.prototype.componentDidMount=function(){document.addEventListener("click",this.manageFocus),document.addEventListener("keydown",this.manageKeyDown)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.manageFocus),document.removeEventListener("keydown",this.manageKeyDown)},t.prototype.fetchSuggestions=function(){return __awaiter(this,void 0,void 0,function(){var n,t;return __generator(this,function(e){switch(e.label){case 0:if(!this.state.value)return[3,4];this.setState({loading:!0}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.props.suggestionFunction(this.state.value)];case 2:return n=e.sent(),this.setState(function(t){return __assign({},t,{suggestions:t.focused?n:[],loading:!1})}),[3,4];case 3:return t=e.sent(),this.setState({suggestions:[],loading:!1}),console.error(t),[3,4];case 4:return[2]}})})},t.prototype.manageTimeout=function(){this.state.suggestionFuncTimeout&&clearTimeout(this.state.suggestionFuncTimeout),this.setState({suggestionFuncTimeout:setTimeout(this.fetchSuggestions,this.state.suggestionFuncDelay)})},t.prototype.manageFocus=function(){var n=document.activeElement,t=this.inputRef.current,e=this.ulRef.current;n===t&&n===e||this.setState({suggestions:[]})},t.prototype.manageKeyDown=function(n){9===n.keyCode&&this.setState({suggestions:[]})},t.prototype.onChange=function(n){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return n.persist(),t=n.target.value,this.setState({value:t,lastOnChangeEvent:n}),this.props.onChange(n),this.manageTimeout(),this.state.value||this.setState({suggestions:[]}),[2]})})},t.prototype.onInputFocus=function(){this.setState({focused:!0})},t.prototype.onInputBlur=function(){this.setState({focused:!1})},t.prototype.onSuggestionClick=function(n){n.persist();var t=n.currentTarget.dataset.value;this.setState({value:t,suggestions:[]});var e=this.state.lastOnChangeEvent;e.target.value=t,this.props.onChange(e)},t.prototype.render=function(){var n=this;return React.createElement(React.Fragment,null,React.createElement("input",__assign({},this.props,{ref:this.inputRef,type:this.props.type||"text",className:"johnnymnemonic input "+(this.props.className||""),value:this.state.value||this.props.value||"",onChange:this.onChange,onFocus:this.onInputFocus,onBlur:this.onInputBlur})),this.state.loading?React.createElement("div",{className:"johnnymnemonic la-ball-scale la-sm"},React.createElement("div",null)):null,this.state.suggestions.length>0?React.createElement("ul",{ref:this.ulRef,className:"johnnymnemonic suggestion-list"},this.state.suggestions.map(function(t){return React.createElement("li",{onClick:n.onSuggestionClick,"data-value":t},t)})):null)},t}(React.Component);module.exports=JohnnyMnemonic;
